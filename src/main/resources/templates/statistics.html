<!DOCTYPE html>
<html th:lang="#{language_code}" xmlns:th="http://www.thymeleaf.org">
<head>

    <script src="/static/js/jquery-1.7.1.js"></script>
    <script src="/static/js/update.js"></script>
    <script th:inline="javascript">
    //This gets the csrf tokens and language code from the website
        /*<![CDATA[*/
        var _csrf_token = /*[[${_csrf.token}]]*/ '';
        var _csrf_param_name = /*[[${_csrf.parameterName}]]*/ '';
        var lang_code = [[#{language_code}]];
        /*]]>*/
    </script>
    <script th:inline="javascript">
	//This executes a long-poll that continuously checks for updates on the server
		$( function() {
		    update.updateId(lang_code);
		    //alert(update.askUpdate());
		});
    </script>
    <title th:text="#{tron_stat}"></title>
    <th:block th:include="fragments/head"/>
</head>
<body>
<header th:include="fragments/navigation :: navigation"/>

<h1 th:text="#{visitors}"></h1>

<p></p>
<table border="1">
    <tr>
        <th th:text="#{browser}"></th>
        <th th:text="#{browser_count}"></th>
    </tr>
    <tr>
        <td>
            <table>
                <tr th:each="browser : ${browsers}">
                    <td th:text="${browser}"></td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr th:each="browser_count : ${browsers_count}">
                    <td th:text="${browser_count}"></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<p></p>
<table border="1">
    <tr>
        <th th:text="#{os}"></th>
        <th th:text="#{os_count}"></th>
    </tr>
    <tr>
        <td>
            <table>
                <tr th:each="os : ${os}">
                    <td th:text="${os}"></td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr th:each="os_count : ${os_count}">
                    <td th:text="${os_count}"></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<p></p>
<table border="1">
    <tr>
        <th th:text="#{id}"></th>
        <th th:text="#{id_count}"></th>
    </tr>
    <tr>
        <td>
            <table>
                <tr th:each="id : ${id}">
                    <td th:text="${id}"></td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr th:each="id_count : ${id_count}">
                    <td th:text="${id_count}"></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<script src="/static/js/offline.js"></script>
<script>
    //This caches the page for offline use
		$( function() {
			if ( !offliner.isOffline ) {
				offliner.cacheCurrentPage();
				offliner.addCachingIframe();
			}

		});
</script>

</body>
</html>